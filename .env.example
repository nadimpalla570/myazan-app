## Environment Configuration

Create a `.env.example` file with all required and optional environment variables:

```env
# Backend Environment Variables
AGORA_APP_ID=your_agora_app_id
AGORA_APP_CERT=your_agora_app_certificate
PORT=4000
NODE_ENV=development

# Firebase (Admin SDK) - uses service account JSON
# Path to service account JSON file (not in repo)
GOOGLE_APPLICATION_CREDENTIALS=./src/config/firebaseServiceAccount.json

# Optional: Error Tracking
SENTRY_DSN=https://your_sentry_key@sentry.io/project_id

# Optional: Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### Frontend Environment Variables (`.env`)
```env
# Firebase Web Config (from Firebase Console)
REACT_APP_FIREBASE_API_KEY=your_api_key
REACT_APP_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
REACT_APP_FIREBASE_PROJECT_ID=your_project_id
REACT_APP_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
REACT_APP_FIREBASE_APP_ID=your_app_id

# API Configuration
REACT_APP_API_BASE_URL=http://localhost:4000/api

# Optional: Sentry
REACT_APP_SENTRY_DSN=https://your_sentry_key@sentry.io/project_id
```

### How to Use
1. Copy `.env.example` to `.env` (git-ignored)
2. Fill in your actual secrets
3. Never commit `.env` to version control
4. Use `dotenv` package to load variables at runtime

---

## Rate Limiting (Backend)

Add rate limiting to prevent token abuse:

```bash
npm install express-rate-limit
```

Then in `src/app.ts`:

```typescript
import rateLimit from 'express-rate-limit';

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100, // limit each IP to 100 requests per windowMs
  message: 'Too many requests, please try again later.',
});

app.use('/api/', limiter);
app.post('/api/token/generate', tokenRoutes);
```

---

## Monitoring Setup (Optional)

### Sentry Integration (Backend)
```bash
npm install @sentry/node @sentry/tracing
```

In `src/server.ts`:

```typescript
import * as Sentry from '@sentry/node';

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 1.0,
});

// Attach error handler
app.use(Sentry.Handlers.errorHandler());
```

### Firebase Crashlytics (Frontend)
Already included in Firebase SDK. Use:

```typescript
import { FirebaseError } from 'firebase/app';

try {
  await joinChannel(engine, channelName, uid, role);
} catch (error) {
  if (error instanceof FirebaseError) {
    // Automatically captured by Crashlytics
  }
}
```
